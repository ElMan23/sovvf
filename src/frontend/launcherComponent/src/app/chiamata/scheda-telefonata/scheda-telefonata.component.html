<div *ngIf="tipologie" [@hideShowAnimator]="hideShowAnimator" class="row mt-3">
  <div class="col-11 pt-5 px-5 mx-auto rounded status_chiamata card-shadow-danger" style="height: 740px">
    <form>
      <div class="form-group mb-1">
        <label>Tipologia intervento</label>
        <ng-select class="border" [items]="tipologie" [multiple]="true" [closeOnSelect]="true" [hideSelected]="true"
          bindLabel="descrizione" (add)="onAddTipologia($event)" (remove)="onRemoveTipologia($event)" placeholder="Seleziona Tipologia Intervento"
          [ngClass]="tipologiaClass()">
        </ng-select>
      </div>
      <div class="form-group">
        <input type="text" id="dettaglioTipologia" class="form-control" placeholder="Dettaglio tipologia">
      </div>
      <div class="row">
        <!-- Divisione in due colonne: cognome -->
        <div class="col">
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-address-card"></i></span>
              </div>
              <input type="text" id="cognome" name="cognome" [(ngModel)]="chiamataCorrente.cognome" class="form-control"
                placeholder="Cognome" [ngClass]="cognomeClass()">
            </div>
          </div>
        </div>
        <!-- Divisione in due colonne: nome -->
        <div class="col">
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-address-card-o"></i></span>
              </div>
              <input type="text" id="nome" name="nome" [(ngModel)]="chiamataCorrente.nome" class="form-control"
                placeholder="Nome" [ngClass]="nomeClass()">
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group mb-1">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="fa fa-industry"></i></span>
          </div>
          <input type="text" id="ragioneSociale" name="ragioneSociale" [(ngModel)]="chiamataCorrente.ragione_sociale" class="form-control" placeholder="Ragione Sociale" [ngClass]="ragioneSocialeClass()">
        </div>
        <!-- Tasti veloci per ragione sociale -->
        <div class="row">
          <div class="col">
            <button class="btn btn-block btn-outline-secondary py-1" (click)="insertRagioneSociale('112')">112</button>
          </div>
          <div class="col">
            <button class="btn btn-block btn-outline-secondary py-1" (click)="insertRagioneSociale('113')">113</button>
          </div>
          <div class="col">
            <button class="btn btn-block btn-outline-secondary py-1" (click)="insertRagioneSociale('118')">118</button>
          </div>
          <div class="col">
            <button class="btn btn-block btn-outline-secondary py-1" (click)="insertRagioneSociale('VV.UU.')">VV.UU.</button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="fa fa-phone"></i></span>
          </div>
          <input type="text" id="telefono" name="telefono" [(ngModel)]="chiamataCorrente.telefono" class="form-control" placeholder="Telefono" [ngClass]="telefonoClass()">
        </div>
      </div>
      <!-- <div class="form-group">
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="fa fa-map-marker"></i></span>
          </div>
          <input type="text" id="coordinate" class="form-control" [value]="coords.longitudine" disabled>
        </div>
      </div> -->
      <div class="row">
        <div class="col-11">
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-map"></i></span>
              </div>
              <input ngx-google-places-autocomplete type="text" id="indirizzo" class="form-control" placeholder="Ricerca indirizzo"
                [options]='options' #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" [ngClass]="coordinateClass()" />
            </div>
          </div>
        </div>
        <div class="col-1 pl-0 text-center">
          <button class="btn btn-secondary" [ngbTooltip]="coordsTooltip" placement="bottom" (click)="copy(coords.coordinate.latitudine, coords.coordinate.longitudine)"
            [disabled]="!coords"><i class="fa fa-clipboard"></i></button>

          <ng-template #coordsTooltip>
            Copia: {{coords.coordinate.latitudine}} - {{coords.coordinate.longitudine}}
          </ng-template>
        </div>
      </div>
      <div class="row">
        <!-- Divisione in due colonne: colonna sinistra -->
        <div class="col-6">
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-map-pin"></i></span>
              </div>
              <input type="text" id="zonaEmergenza" class="form-control" placeholder="Zona Emergenza">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-commenting"></i></span>
              </div>
              <textarea class="form-control no-resize" placeholder="Motivazione"></textarea>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-bullhorn"></i></span>
              </div>
              <textarea class="form-control no-resize" placeholder="Note pubbliche"></textarea>
            </div>
          </div>
        </div>
        <!-- Divisione in due colonne: colonna destra -->
        <div class="col-6">
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-tag"></i></span>
              </div>
              <input type="text" id="tag" class="form-control" placeholder="Tag">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-comments"></i></span>
              </div>
              <textarea class="form-control no-resize" placeholder="Note indirizzo"></textarea>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-headphones"></i></span>
              </div>
              <textarea class="form-control no-resize" placeholder="Note private"></textarea>
            </div>
          </div>
        </div>
      </div>
    </form>
    <div class="row">
      <div class="col">
        <h5 class="py-3 text-danger"><i class="fa fa-fw fa-hashtag mr-1"></i>RM-004</h5>
      </div>
      <div class="col text-right">
        <button class="btn btn-lg btn-secondary mr-2" disabled><i class="fa fa-check mr-1"></i>Conferma</button>
        <button class="btn btn-lg btn-danger" (click)="annullaChiamata()"><i class="fa fa-trash"></i></button>
      </div>
    </div>
  </div>
</div>