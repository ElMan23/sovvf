<table class="table table-striped app-shadow mt-2">
  <thead>
    <tr>
      <th scope="col" width="25%">Nominativo</th>
      <th scope="col" width="40%">Permessi</th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="let utente of listaUtenti | paginate: { itemsPerPage: pageSize, currentPage: page, totalItems: totalItems }">
      <td width="40%" class="pb-1">
        <button class="btn btn-sm btn-danger font-weight-bold mr-2" ngbTooltip="Rimuovi utente" placement="bottom"
          (click)="onRemoveUtente(utente.id, utente.cognome + ' ' + utente.nome)">
          <i class="fa fa-trash"></i>
        </button>
        <span class="h6 font-weight-normal font-weight-bold">{{utente.cognome}} {{utente.nome}}</span>
      </td>
      <td width="60%" class="pb-1">
        <button class="btn btn-primary btn-sm font-weight-bold mr-2"
          (click)="onAddRuoloUtente(utente.codiceFiscale, utente.cognome + ' ' + utente.nome)">
          <i class="fa fa-plus"></i>
        </button>
        <div *ngFor="let ruolo of utente.ruoli, let i=index" class="d-inline-block h6 font-weight-normal">
          <button class="btn btn-warning btn-sm font-weight-bold mr-1" ngbTooltip="Visualizza i permessi"
            placement="top" [ngbPopover]="popPermessiRole" (click)="onDetailPermessi(ruolo)">
            {{ruolo.codSede}}
          </button>
          <ng-template #popPermessiRole>
            <div class="py-2">
              <h5 class="mb-0">{{wipeRoleString(ruolo.descrizione)}}</h5>
              <small>
                <i class="fa fa-map-pin mr-1"></i>
                {{ruolo.descSede}}
              </small>
              <ul *ngIf="dettaglioPermessi && dettaglioPermessi.length > 0" class="list-unstyled mt-2">
                <li *ngFor="let perm of dettaglioPermessi">
                  <i class="fa fa-cog mr-1"></i>
                  {{perm}}
                </li>
              </ul>
              <small *ngIf="!dettaglioPermessi || dettaglioPermessi.length <= 0" class="text-danger">Nessun Permesso
                Assegnato</small>
              <button class="btn btn-danger btn-sm btn-block mr-1" ngbTooltip="Rimuovi ruolo utente" placement="bottom"
                (click)="onRemoveRuoloUtente(utente.id, ruolo, utente.cognome + ' ' + utente.nome)">
                Rimuovi
              </button>
            </div>
          </ng-template>
        </div>
      </td>
    </tr>
    <tr *ngIf="listaUtenti?.length <= 0">
      <td>
        Nessun Utente trovato
      </td>
      <td *ngFor="let ruolo of ruoli"></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
<div *ngIf="listaUtenti?.length > 0" class="d-flex justify-content-between p-2">
  <pagination-controls [previousLabel]="'Precedente'" [nextLabel]="'Successiva'" (pageChange)="pageChange.emit($event)">
  </pagination-controls>
</div>
