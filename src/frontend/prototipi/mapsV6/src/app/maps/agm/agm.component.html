<div *ngIf="!map_loaded" class="mx-auto my-5">
    <img src="../../../assets/img/map_loading_resized.gif">
</div>
<agm-map [latitude]="centroMappa.coordinate.latitudine" [longitude]="centroMappa.coordinate.longitudine" [zoom]="centroMappa.zoom" (mapReady)="mappaCaricata()" [usePanning]="true">
    <agm-marker *ngFor="let m of richiesteMarkers;" [latitude]="m.localita.coordinate[0]"
                [longitude]="m.localita.coordinate[1]"
                (markerClick)="selezioneMarker(m)"
                [iconUrl]="tipoIcona(m)" [animation]="tipoAnimazione(m)" [visible]="true">
        <agm-info-window *ngIf="trueMarker(m)">
            <strong>{{m.label}}</strong>
            <div *ngIf="datiMeteo" class="h-infowindow">
                <hr class="my-0">
                <div>
                    <img class="mr-2 iconameteo w-25" src="http://openweathermap.org/img/w/{{datiMeteo.icona}}.png">
                    <span class="text-capitalize">{{datiMeteo.descrizione}}</span>
                </div>
                <div class="text-center">{{datiMeteo.temperatura}}°C - Umidità: {{datiMeteo.umidita}}%</div>
                <div class="text-center">Vento {{datiMeteo.vento}} km/h
                    <i [ngStyle]="{'transform': 'rotate('+datiMeteo.direzione.gradi+'deg)', '-webkit-transform': 'rotate('+datiMeteo.direzione.gradi+'deg)', '-ms-transform': 'rotate('+datiMeteo.direzione.gradi+'deg)'}"
                       class="pl-2 fa fa-long-arrow-up"></i> {{datiMeteo.direzione.cardinali}}
                </div>
            </div>
        </agm-info-window>
    </agm-marker>
</agm-map>
